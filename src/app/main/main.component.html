<app-header></app-header>
<form #postForm="ngForm" 
    [formGroup]="clientForm" (ngSubmit)="sendData(postForm)">
    <!-- <mat-accordion> -->
    <!-- 1. Choose the Style -->
    <mat-expansion-panel [expanded]="step === 0">
        <mat-expansion-panel-header>
            <mat-panel-title>
                1. Choose the Style
            </mat-panel-title>
        </mat-expansion-panel-header>
        <p class="img-row">
            <strong class="strong">Color:</strong>
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
                <mat-button-toggle value="bold" (click)="chooseBlank()">Blank</mat-button-toggle>
                <mat-button-toggle value="italic" (click)="chooseFullColor()">Full Color</mat-button-toggle>
            </mat-button-toggle-group>
            <mat-button-toggle-group name="fontStyle" aria-label="Font Style" *ngIf="fullColor">
                <mat-button-toggle value="bold" (click)="chooseOneSided()">One Sided</mat-button-toggle>
                <mat-button-toggle value="italic" (click)="chooseTwoSided()">Two Sided</mat-button-toggle>
            </mat-button-toggle-group>
        </p>
        <p class="img-row">
            <img src="../../assets/imgs/blank-color.jpg" alt="blank" *ngIf="blankImg">
            <img src="../../assets/imgs/full-color.jpg" alt="color" *ngIf="colorImg">
        </p>
    </mat-expansion-panel>
    <!-- 2. Select the Material -->
    <mat-expansion-panel [disabled]="isDisabledMaterial" [expanded]="isDisabledMaterial == false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                2. Select the Material
            </mat-panel-title>
        </mat-expansion-panel-header>
        <p>
            <mat-form-field appearance="fill" name="materialForm" #materialForm>
                <mat-label>Select a Material Option</mat-label>
                <!-- BLANK COLOR SELECTED -->
                <mat-select *ngIf="blankColorFlag" formControlName="blankMaterialValue"
                    (selectionChange)="selectedBlankMaterial()">
                    <mat-option *ngFor="let material of materials" [value]="material.prodMaterial">
                        {{ material.prodMaterial  }}                     
                    </mat-option>
                </mat-select>
                <!-- FULL COLOR ONE SIDE SELECTED -->
                <mat-label>Select a Material Option</mat-label>
                <mat-select *ngIf="oneSidedMaterialFlag" formControlName="fullColorOneSidedValue"
                    (selectionChange)="selectedFullColorOneSideMaterial()">
                    <mat-option *ngFor="let material of oneSidedMaterial" [value]="material.value">
                        <span>{{ material.value }}</span>
                    </mat-option>
                </mat-select>
                <!-- FULL COLOR TWO SIDE SELECTED -->
                <mat-label>Select a Material Option</mat-label>
                <mat-select *ngIf="twoSidedMaterialFlag" formControlName="fullColorTwoSidedValue"
                    (selectionChange)="selectedFullColorTwoSideMaterial($event)">
                    <mat-option *ngFor="let material of twoSidedMaterial" [value]="material.value"
                        name="twoSidedMaterial">
                        <span>{{ material.value }}</span>
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </p>
    </mat-expansion-panel>
    <!-- 3. Define the Dimensions -->
    <mat-expansion-panel [disabled]="isDisabledDimensions" [expanded]="isDisabledDimensions == false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                3. Define the Dimensions
            </mat-panel-title>
        </mat-expansion-panel-header>
        <p>
            <strong>Width: </strong>
            <mat-form-field class="example-form-field">
                <mat-label>Ft</mat-label>
                <input matInput type="number" min="2" max="10" formControlName="enteredWidthFt" (change)="onChangeSize()">
                <mat-error *ngIf="clientForm.get('enteredWidthFt').invalid">The maximum size is 10FT</mat-error>
            </mat-form-field>
            <mat-form-field class="example-form-field">
                <mat-label>In</mat-label>
                <input matInput type="text" formControlName="enteredWidthIn">
            </mat-form-field>
        </p>
        <p>
            <strong>Height:</strong>
            <mat-form-field class="example-form-field">
                <mat-label>Ft</mat-label>
                <input matInput type="number" formControlName="enteredHeightFt" (change)="onChangeSize()">
                <mat-error *ngIf="clientForm.get('enteredHeightFt').invalid">The minimum size is 2FT</mat-error>
            </mat-form-field>
            <mat-form-field class="example-form-field">
                <mat-label>In</mat-label>
                <input matInput type="text" formControlName="enteredHeightIn">
            </mat-form-field>
        </p>
        <strong >Price: {{ filteredObj.price }} $</strong><br>
        <strong>Sq Fit: {{ filteredObj.width * filteredObj.height }}</strong>
    </mat-expansion-panel>
    <!-- 4. Select A Finishing Type -->
    <mat-expansion-panel [disabled]="isDisabledDimensions" [expanded]="isDisabledDimensions == false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                4. Select A Finishing Type
            </mat-panel-title>
        </mat-expansion-panel-header>
        <p>
            <mat-form-field appearance="fill">
                <mat-label>Select a Finishing Type</mat-label>
                <mat-select formControlName="enteredProdType" (selectionChange)="selectedType()">
                    <mat-option *ngFor="let type of finishType" [value]="type.value">
                        <span>{{ type.value }}</span>
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </p>
    </mat-expansion-panel>
    <!-- </mat-accordion> -->
    <div class="send">
        <button [disabled]="nextBtnFlag" mat-raised-button color="primary" (click)="goToNext()">Next</button>
    </div>
    <mat-horizontal-stepper linear #stepper *ngIf="addressFlag">
        <mat-step>
            <!-- <form [formGroup]="firstFormGroup"> -->
            <ng-template matStepLabel>Fill out your name</ng-template>
            <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput formControlName="userName" placeholder="Last name, First name" required>
            </mat-form-field>
            <div>
                <button mat-button matStepperNext (click)="cancelEvent($event)">Next</button>
            </div>
            <!-- </form> -->
        </mat-step>
        <mat-step>
            <!-- <form [formGroup]="secondFormGroup"> -->
            <ng-template matStepLabel>Fill out your address</ng-template>
            <mat-form-field>
                <mat-label>Address</mat-label>
                <input name="address" 
                    matInput 
                    (selectionChange)="addressOnChange($event.target)"
                    formControlName="address" 
                    placeholder="Ex. 1 Main St, New York, NY"
                    required>
            </mat-form-field>
            <div>
                <button mat-button matStepperPrevious (click)="cancelEvent($event)">Back</button>
                <button mat-button matStepperNext (click)="cancelEvent($event)">Next</button>
            </div>
            <!-- </form> -->
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Done</ng-template>
            <p class="done-form">You are now done.</p>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <!-- <button mat-button (click)="stepper.reset()">Reset</button> -->
                <!-- <button mat-button (click)="sendAddress()">SEND</button> -->
            </div>
        </mat-step>
    </mat-horizontal-stepper>
    <div class="send">
        <button mat-raised-button color="primary" [disabled]="!clientForm.valid">Send</button>
    </div>
</form>
<br>Dirty: {{ clientForm.dirty }}
<br>Touched: {{ clientForm.touched }}
<br>Valid: {{ clientForm.valid }}
<br>Value: {{ clientForm.value | json }}



<!-- tests -->
<!-- <button (click)="getFinishType()">get finish type</button> -->
<!-- <form [formGroup]="form">
    <input matInput type="text" formControlName="title1">
    <mat-error *ngIf="form.get('title').invalid"></mat-error>
    <input matInput type="text" formControlName="content2"> -->
<button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
<input type="file" #filePicker (change)="onImagePicked($event)">
<div class="image-preview" *ngIf="imagePreview !== '' && imagePreview ">
    <img [src]="imagePreview">
</div>
<!-- <button mat-raised-button color="primary" type="submit" (click)="sendImg()">send img</button>
</form> -->
<a routerLink="/admin">go to admin panel</a>
<a routerLink="/login">go to Login</a>
<app-footer></app-footer>